<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lc.product.center.mapper.ProductSkuMapper">

    <!-- 通用字段列表 -->
    <sql id="Base_Column_List">
    SELECT id, tenant_id, sku_code, sku_name, product_code, sub_product_code, sku_type,
    saleable, visible, quota_limit, status, publish_time, deleted,
    created_by, dt_created, modified_by, dt_modified FROM product_center.product_sku
    </sql>

    <!-- 动态条件查询（唯一的查询入口） -->
    <select id="selectByCondition" resultType="com.lc.product.center.domain.entity.ProductSkuDO"
            parameterType="com.lc.product.center.domain.dto.ProductSkuDTO">
        <include refid="Base_Column_List"/>
        <where>
            deleted = 0
            <if test="tenantId != null and tenantId != ''">
                AND tenant_id = #{tenantId}
            </if>
            <if test="skuCode != null and skuCode != ''">
                AND sku_code = #{skuCode}
            </if>
            <if test="skuName != null and skuName != ''">
                AND sku_name LIKE CONCAT('%', #{skuName}, '%')
            </if>
            <if test="productCode != null and productCode != ''">
                AND product_code = #{productCode}
            </if>
            <if test="subProductCode != null and subProductCode != ''">
                AND sub_product_code = #{subProductCode}
            </if>
            <if test="skuType != null and skuType != ''">
                AND sku_type = #{skuType}
            </if>
            <if test="saleable != null">
                AND saleable = #{saleable}
            </if>
            <if test="visible != null">
                AND visible = #{visible}
            </if>
            <if test="status != null and status != ''">
                AND status = #{status}
            </if>
        </where>
        ORDER BY dt_created DESC
    </select>

</mapper>
