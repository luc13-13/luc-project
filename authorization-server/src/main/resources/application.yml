server:
  port: 8889

spring:
  application:
    name: authorization-server
  profiles:
    active: dev
  cloud:
    nacos:
      server-addr: 127.0.0.1:8848
      discovery:
        namespace: com-lc-dev

  # 数据源配置
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/institution_center?useSSL=false&useUnicode=true&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai&characterEncoding=UTF-8
    username: root
    password: luc123456

  # Redis 配置
  data:
    redis:
      database: 0
      host: 127.0.0.1
      port: 6379
      password: luc123456
      timeout: 5000
      client-type: lettuce
      lettuce:
        pool:
          min-idle: 8
          max-idle: 500
          max-active: 2000
          max-wait: 10000
          enabled: true

  # OAuth2 配置
  security:
    oauth2:
      authorizationserver:
        issuer: http://127.0.0.1:8889
        client:
          gitee:
            registration:
              client-id: gitee-client-id
              client-secret: your-gitee-client-secret
              scopes:
                - user_info
                - openid
                - profile
              client-authentication-methods:
                - client_secret_basic
              authorization-grant-types:
                - authorization_code
              redirect-uris:
                - http://127.0.0.1:8889/login/oauth2/code/gitee
              post-logout-redirect-uris:
                - http://127.0.0.1:8889/
            require-authorization-consent: true
          wechat:
            registration:
              client-id: your-wechat-client-id
              client-secret: your-wechat-client-secret
              scopes:
                - snsapi_userinfo
                - user_info
                - openid
                - profile
              client-authentication-methods:
                - client_secret_basic
              authorization-grant-types:
                - authorization_code
              redirect-uris:
                - http://127.0.0.1:8889/login/oauth2/code/wechat
              post-logout-redirect-uris:
                - http://127.0.0.1:8889/
            require-authorization-consent: true


# MyBatis-Plus 配置
mybatis-plus:
  mapper-locations: classpath*:mapper/*.xml
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# SpringDoc OpenAPI 配置
springdoc:
  info:
    title: "LUC认证中心 API文档"
    version: "1.0.0"
    description: "基于Spring Authorization Server构建的认证授权中心服务API文档"

# 系统配置
sys:
  security:
    # 白名单路径
    white-paths:
      # 首页
      - /index
      - /welcome
      # 静态资源
      - /css/**
      - /js/**
      - /images/**
      - /static/**"
      # api文档
      - /v3/api-docs/**
      - /swagger-ui/**
      - /doc.html
      - /favicon.ico
      # 监控
      - /actuator/**
      - /health
      # 认证相关
      - /oauth2/**
      - /login/**
      - /register/**
      - /sms/**
  # 短信配置
  sms:
    enabled: true
    provider: aliyun
    access-key-id: your-access-key-id
    access-key-secret: your-access-key-secret
    sign-name: 您的签名
    template-code: SMS_123456789

# 日志配置
logging:
  level:
    root: info
    com.lc.auth: debug
    org.springframework.security: debug

