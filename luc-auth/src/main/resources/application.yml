server:
  port: 8889

spring:
  application:
    name: luc-auth
  profiles:
    active: dev
  cloud:
    nacos:
      server-addr: 127.0.0.1:8848
      discovery:
        namespace: com-lc-dev

  # 数据源配置
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/institution_center?useSSL=false&useUnicode=true&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai&characterEncoding=UTF-8
    username: root
    password: luc123456

  # Redis 配置
  data:
    redis:
      database: 0
      host: 127.0.0.1
      port: 6379
      password: luc123456
      timeout: 5000
      client-type: lettuce
      lettuce:
        pool:
          min-idle: 8
          max-idle: 500
          max-active: 2000
          max-wait: 10000
          enabled: true

  # OAuth2 配置
  security:
    oauth2:
      authorizationserver:
        issuer: http://127.0.0.1:8889
        client:
          gitee:
            registration:
              client-id: your-gitee-client-id
              client-secret: your-gitee-client-secret
              scopes: user_info
              authorization-grant-types: authorization_code
              redirect-uris: "{baseUrl}/login/oauth2/code/{registrationId}"
            require-authorization-consent: true
          wechat:
            registration:
              client-id: your-wechat-client-id
              client-secret: your-wechat-client-secret
              scopes: snsapi_userinfo
              authorization-grant-types: authorization_code
              redirect-uris: "{baseUrl}/login/oauth2/code/{registrationId}"
            require-authorization-consent: true
        provider:
          gitee:
            authorization-uri: https://gitee.com/oauth/authorize
            token-uri: https://gitee.com/oauth/token
            user-info-uri: https://gitee.com/api/v5/user
            user-name-attribute: login
          wechat:
            authorization-uri: https://open.weixin.qq.com/connect/oauth2/authorize
            token-uri: https://api.weixin.qq.com/sns/oauth2/access_token
            user-info-uri: https://api.weixin.qq.com/sns/userinfo
            user-name-attribute: openid


# MyBatis-Plus 配置
mybatis-plus:
  mapper-locations: classpath*:mapper/*.xml
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# SpringDoc OpenAPI 配置
springdoc:
  info:
    title: "LUC认证中心 API文档"
    version: "1.0.0"
    description: "基于Spring Authorization Server构建的认证授权中心服务API文档"

# 系统配置
sys:
  security:
    # 白名单路径
    white-paths:
      - /v3/api-docs/**
      - /swagger-ui/**
      - /doc.html
      - /favicon.ico
      - /actuator/**
      - /health
      - /oauth2/**
      - /login/**
      - /register/**
      - /sms/**
  # 短信配置
  sms:
    enabled: true
    provider: aliyun
    access-key-id: your-access-key-id
    access-key-secret: your-access-key-secret
    sign-name: 您的签名
    template-code: SMS_123456789

# 日志配置
logging:
  level:
    root: info
    com.lc.auth: debug
    org.springframework.security: debug

